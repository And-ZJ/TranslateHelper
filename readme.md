# Chrome 浏览器 插件

## 插件名

翻译助手 TranslateHelper

## 用途

在常见的网页翻译网页的页面上，提供如下方便实用小功能：

1. 点击“格式化”按钮，可自动去除待翻译文本中的换行符。
2. 可设置“格式化”按钮的键盘快捷键。
3. 点击“复制”按钮，一键复制翻译结果。
4. 翻译网页上按下 backspace 键，焦点将回到原文输入框。
5. 按下 tab 键，输入框的发音按钮自动获取焦点，此时再按下 enter 键，即可发音。此处只针对原文输入框。
6. 同时按下 shift 和 backspace 键（应先按 shift 键），可直接清空原文输入框内容。

## 可使用的网页翻译页面

1. 百度翻译：https://fanyi.baidu.com/
2. 谷歌翻译：https://translate.google.cn/、https://translate.google.com.hk/、https://translate.google.com
3. 有道翻译：http://fanyi.youdao.com/
4. 必应翻译：https://cn.bing.com/translator/

## 在线安装

Chrome [网上应用店安装](https://chrome.google.com/webstore/detail/%E7%BF%BB%E8%AF%91%E5%8A%A9%E6%89%8B/ldhdmpimmbbjemmbklofidofnkgpakaa)

## 在线更新

如果在 Chrome 网上应用店 存在新版本，手动更新步骤如下：
1. 单击浏览器右上角“三点”选项按钮（通常在关闭浏览器的“×”按钮的下方）
2. 选择“更多工具”-->“拓展程序”
3. 勾选页面右上方“开发者模式”。
4. 点击新出现的“更新”按钮，等待出现左下角出现“拓展程序已更新”提示即可。
5. 取消选中“开发者模式”。

## 本地安装

在 Github 上[获取本插件](https://github.com/And-ZJ/TranslateHelper)

0. 如果下载到zip等压缩文件，请解压，并最好存放到您常用的软件安装位置，以免误删除。

本安装方法，可能不适合最新版浏览器，但设置起来大同小异，请耐心设置

针对谷歌浏览器的安装方法：

1. 单击浏览器右上角“三点”选项按钮（通常在关闭浏览器“×”按钮的下方）
2. 选择“更多工具”-->“拓展程序”
3. 勾选页面右上方“开发者模式”
4. 点击“加载已解压的拓展程序”
5. 选择本文件夹所在目录（或者是选中 manifest.json 文件）
6. 此时本插件已可以在上述页面（已打开的页面需要刷新）使用

针对QQ浏览器的设置方法（相关翻译页面需运行在极速模式下）

1. 打开QQ浏览器，进入“设置”，左侧选择“我的应用”图标。
2. 上方选择“管理我的应用”。
3. 右侧勾中“开发者模式”。
4. 左侧选择“加载已解压的拓展程序”，弹出文件夹选择框。
5. 选择本插件所在的文件夹，点击“确定”即可.

其他可使用 Chrome 插件的浏览器设置类似（显然不支持 Microsoft Edge 或 IE 类浏览器）。

## 本地更新

若需要使用已发布到 Github 上的新版本，则需要手动更新，该插件不支持自动更新。
更新步骤如下：
1. 按上述步骤，找到本插件，点击“删除”或“卸载”旧版本插件。
2. 在 Github 上下载最新的代码，如果下载到zip等压缩文件，请解压，并最好存放到您常用的软件安装位置，以免误删除。
3. 按上述方法，本地安装最新版本插件即可。

## 插件设置

通过左键点击本插件图标(图标一般在浏览器右上角)，可直接对“格式化”功能进行快速设置。

更多设置，可进入“选项”界面进行设置。
选项进入方法：右键点击本插件图标(图标一般在浏览器右上角)，选择“选项”即可。

在选项中，可选择是否启用上述功能。

## 声明

1. 本插件开源，仅限学习交流，例如学习插件的简易开发。
2. 如使用本插件进行不当行为，本人不承担责任。
3. 如对上述网站构成侵权，请立即使用下方联系方式进行联系删除。
4. 本插件不采集任何个人或团体隐私信息，不使用网络。仅利用Chrome提供的同步API，将您的设置自动同步到多设备上。
5. 从 Chrome 网上应用店 可免费获取本插件内容。
6. 如需联系作者（例如：不能使用或出错了），可给下方的邮箱发邮件。


## 注意事项

 1. 本地安装启用开发者模式后，每次打开谷歌浏览器，可能会提示:

    ​	“请停用以开发者模式运行的拓展程序”等内容。

    ​	这是正常现象，不是本插件有任何危害计算机或浏览器或网页的问题。

    ​	您可以点击“x”按钮，不理会此消息。

    ​	也可以在需要时去“拓展程序”中，启用本插件，而在不需要使用时，停止本插件。

    ​	若从 Chrome 网上应用店 安装本插件，则并不需要启动开发者模式，也不会有此提示。

## 已知 Bug

1. 谷歌翻译界面有时候存在无法出现“格式化”按钮的情况，暂不清楚原因。
       出现场景1：设置谷歌翻译界面为主页后，初次启动浏览器容易发生。
       出现场景2：由于网络原因谷歌翻译页面加载时间过长时，偶尔出现。
       一般刷新下就可以。
       如果刷新无效，可右键点击本插件图标，选择“选项”，选择不同的“嵌入模式”。
       若上述方法不能解决问题，可联系作者，或查看Github页面是否已更新版本。


## 不完善之处

1. 使用复制功能时，若翻译结果中存在多行，则复制结果里会多出换行。
    此复制功能采用 [clipboard.js](https://github.com/zenorocha/clipboard.js) 实现，该库的原生功能会造成此效果，暂没有解决。
2. 若输入文本含有中文，则将换行符全部删除会导致部分英文恰好存在换行时，也被删除，而不是替换成空格。
    2020-04-21：目前仅在单空格两侧都是中文时，才会删除空格，不会影响英文单词间的空格。
    但同时也注意到，如果中文和符号中间隔了空格的情况，并未处理。
3. 如果原文含有 tab，tab 并不会被删除。
    2020-04-21：tab 目前默认处理成4空格，如需保留tab，请在设置中关闭此选项。
4. 这份代码还有很多地方可以改，最近稍忙，留待以后，呃。
    2020-04-21：抽了点时间，进行了大改，代码有点丑陋也没有经过充分测试，可能存在问题。

## 使用到的其他库

1. [jquery](https://github.com/jquery/jquery)
2. [clipboard](https://github.com/zenorocha/clipboard.js)
3. [jquery.hotkeys](https://github.com/jeresig/jquery.hotkeys)
4. [bootstrap](https://github.com/twbs/bootstrap)

也许有遗漏，在此全部感谢。

## 联系作者

And_ZJ

ZJ.Cosmos@gmail.com

## 其他贡献者

特此感谢各位对本插件的建议。

**[@liyangorg](https://github.com/liyangorg)**

同时，也感谢其他小伙伴对本插件的关注和信任。

## 更新日志

2020-04-21
1. 更新版本号 0.8。
2. 修复manifest文件中，“icon.PNG”写成“icon.png”，导致Linux下无法识别图标的问题。
3. 完成对“除换行”功能的细分，该功能已更名为“格式化”，其包含几项不同设置，默认设置与原来“除换行”功能相近。
4. 在浏览器右上角，用鼠标左键点击图标，可进行“格式化”功能的快速设置，可不用打开“选项”。
5. 移除上一版“通过行末句点判断段落”的功能，但“保留空行”功能留着并默认勾选。
6. 才发现必应翻译页面已改版，故进行了重适配。
7. 修复了之前“除换行”按键和快捷键之间“除换行”效果不一致的问题。
8. 去掉了谷歌翻译网页的选择不同版本的功能（暂未完全删除），通过识别页面元素是否存在来默认实现了。
9. 此版本将上传到 Chrome 网上应用店。

2019-12-04

1. **[@liyangorg](https://github.com/liyangorg)** 除换行时，会保留已有空行，也检测行末尾是否是句点，是则当成段落处理。
2. 暂未更新应用商店中版本。

2019-10-13

1. 已发布到 Chrome 网上应用店。采用非公开，仅通过链接进入的方式进行发布。
2. 更新 readme，并删除多余日志。

2019-06-25

1. 版本 0.7
2. 必应翻译网页也可以使用本插件了.

2019-04-01

1. 版本 0.6.1
2. 点击“除换行”后，会给原文输入框最后添加一个换行符，方便在后面粘贴新的内容。

2019-03-31

1. 版本 0.6
2. 添加“复制”按钮，可复制翻译结果（某些页面自带，某些没有）。
3. 结构再次重排（强迫症555）
4. 如果输入框文字中，含有中文，则将换行符去除（之前是默认都替换成空格）。此处会引入问题，以后修复。

2018-11-29

1. 版本 0.5

2. 今天发现谷歌翻译所有网页又改版了，晕，为了防止它又改回去，导致本软件频繁更改，于是对本插件进行了重大升级。

3. 新增“选项”，可在选项中，设置启用不同的功能，使用不同“嵌入模式”或选择不同的“版本”。

   如果网页改回去了，“版本”中选择“旧版”。

   如果“除换行”不能出现，尝试使用不同的“嵌入模式”。

4. 新增“除换行”功能的快捷键，并且可设置快捷键。若“除换行”因BUG不能出现，快捷键还是可以用的。
   如果快捷键不起作用，可选择不同的“版本”，然后重试。

5. 默认只启用“除换行”功能和“除换行”功能的快捷键。

6. 添加背景页，在翻译界面图标会高亮（并不明显）。